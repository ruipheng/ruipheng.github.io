<!DOCTYPE html ><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>android 几何图形的绘制</title></head><body><p>原文出处:http://byandby.iteye.com/blog/826418</p><p>以前的文章里边画一般都是一些矩形，今天就看看怎么在android手机屏幕上绘制一些几何图形，如三角形、多边形、椭圆、圆形、正方形 等等。并且设置 空心、实心。下面我们先来看看<br />在android中可以绘制出那些几何图形<br /> &nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;方法 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;说明<br /> &nbsp;&nbsp;drawRect &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制矩形<br /> &nbsp;&nbsp;drawCircle &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制圆形<br /> &nbsp;&nbsp;drawOval &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制椭圆<br /> &nbsp;&nbsp;drawPath &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制任意多边形<br /> &nbsp;&nbsp;drawLine &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制直线<br /> &nbsp;&nbsp;drawPoin &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;绘制点<br /><img src="http://m2.img.srcdd.com/farm3/d/2012/0416/11/477C0E8BD0BC6ADDEADEFE85A3FF32B0_B500_900_379_572.JPEG" /></p><p>下面我们看例子吧<br /> 布局文件<br />&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br />&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br /> &nbsp;&nbsp;android:orientation=&quot;vertical&quot;<br /> &nbsp;&nbsp;android:layout_width=&quot;fill_parent&quot;<br /> &nbsp;&nbsp;android:layout_height=&quot;fill_parent&quot;<br /> &nbsp;&nbsp;&gt;<br />&lt;TextView<br /> &nbsp;&nbsp;android:layout_width=&quot;fill_parent&quot;<br /> &nbsp;&nbsp;android:layout_height=&quot;wrap_content&quot;<br /> &nbsp;&nbsp;android:text=&quot;@string/hello&quot;<br /> &nbsp;&nbsp;android:textColor=&quot;#00FF00&quot;<br /> &nbsp;&nbsp;/&gt;<br />&lt;xiaohang.zhimeng.GameView<br />android:layout_width=&quot;wrap_content&quot;<br />android:layout_height=&quot;wrap_content&quot;<br />/&gt;<br />&lt;/LinearLayout&gt;<br /> &nbsp;红色的部分 是我们自己实现的 GameView此类继承了View 我们把它作为布局文件的一部分加载了进来。<br /> 下边是代码<br />Activity01 &nbsp;&nbsp;比较简单 但是为了保持完整我还是贴上来吧。<br /></p><p>package xiaohang.zhimeng;</p><p>import android.app.Activity;<br />import android.os.Bundle;</p><p>public class Activity01 extends Activity {<br />@Override<br />protected void onCreate(Bundle savedInstanceState) {<br /> super.onCreate(savedInstanceState);<br /> setContentView(R.layout.main);<br />}<br />}</p><p>package xiaohang.zhimeng;</p><p>import android.content.Context;<br />import android.graphics.Canvas;<br />import android.graphics.Color;<br />import android.graphics.Paint;<br />import android.graphics.Path;<br />import android.graphics.Rect;<br />import android.graphics.RectF;<br />import android.util.AttributeSet;<br />import android.view.View;</p><p>public class GameView extends View implements Runnable {<br />// 声明Paint对象<br />private Paint mPaint = null;<br /><br />private GameView2 mGameView2 = null;<br /><br />public GameView(Context context, AttributeSet attr){<br /> super(context,attr);<br /> System.out.println(1);<br /> // 构建画笔对象<br /> mPaint = new Paint();</p><p> mGameView2 = new GameView2(context);<br /> // 开启线程<br /> new Thread(this).start();<br />}</p><p>@Override<br />protected void onDraw(Canvas canvas) {<br /> super.onDraw(canvas);</p><p> // 设置画布为黑色背景<br /> canvas.drawColor(Color.BLACK);</p><p> // 取消锯齿<br /> mPaint.setAntiAlias(true);</p><p> // 设置画笔风格为空心<br /> mPaint.setStyle(Paint.Style.STROKE);</p><p> {<br /> &nbsp;// 定义矩形对象<br /> &nbsp;Rect rect1 = new Rect();<br /> &nbsp;// 设置矩形大小<br /> &nbsp;rect1.left = 5;<br /> &nbsp;rect1.top = 5;<br /> &nbsp;rect1.bottom = 25;<br /> &nbsp;rect1.right = 45;</p><p> &nbsp;mPaint.setColor(Color.BLUE);<br /> &nbsp;// 绘制矩形<br /> &nbsp;canvas.drawRect(rect1, mPaint);</p><p> &nbsp;mPaint.setColor(Color.RED);<br /> &nbsp;// 绘制矩形<br /> &nbsp;canvas.drawRect(50, 5, 90, 25, mPaint);</p><p> &nbsp;mPaint.setColor(Color.YELLOW);<br /> &nbsp;// 绘制圆形<br /> &nbsp;// 40 70 分别是圆心的X 和 Y坐标 30为半径 mPaint为画笔对象<br /> &nbsp;canvas.drawCircle(40, 70, 30, mPaint);</p><p> &nbsp;// 定义椭圆<br /> &nbsp;RectF rectf1 = new RectF();<br /> &nbsp;rectf1.left = 80;<br /> &nbsp;rectf1.top = 30;<br /> &nbsp;rectf1.right = 120;<br /> &nbsp;rectf1.bottom = 70;</p><p> &nbsp;mPaint.setColor(Color.LTGRAY);<br /> &nbsp;// 绘制椭圆<br /> &nbsp;canvas.drawOval(rectf1, mPaint);</p><p> &nbsp;// 绘制多边形<br /> &nbsp;Path path1 = new Path();</p><p> &nbsp;/**<br /> &nbsp;&nbsp;* 这个多变形我也没试验它到底是怎么画 应该就是从起点 找点 一个点 一个点的连线<br /> &nbsp;&nbsp;*/<br /> &nbsp;path1.moveTo(150 + 5, 80 - 50); // 此点为多边形的起点<br /> &nbsp;path1.lineTo(150 + 45, 80 - 50);<br /> &nbsp;path1.lineTo(150 + 30, 120 - 50);<br /> &nbsp;path1.lineTo(150 + 20, 120 - 50);<br /> &nbsp;// 使这些点构成封闭的多边形<br /> &nbsp;path1.close();</p><p> &nbsp;mPaint.setColor(Color.GRAY);<br /> &nbsp;// 绘制这个多边形<br /> &nbsp;canvas.drawPath(path1, mPaint);</p><p> &nbsp;mPaint.setColor(Color.RED);<br /> &nbsp;// 设置画笔空心边框的宽度<br /> &nbsp;mPaint.setStrokeWidth(3);<br /> &nbsp;// 绘制直线<br /> &nbsp;// 这个绘制直线的方法 前2个参数是前点坐标 后 2个参数是 终点坐标我们可看出两个点的Y坐标都一样的<br /> &nbsp;canvas.drawLine(5, 110, 315, 110, mPaint);<br /> }</p><p> // 绘制实心几何体<br /> // 将画笔设置为实心<br /> mPaint.setStyle(Paint.Style.FILL);<br /> {<br /> &nbsp;// 定义矩形<br /> &nbsp;Rect rect1 = new Rect();<br /> &nbsp;rect1.left = 5;<br /> &nbsp;rect1.top = 130 + 5;<br /> &nbsp;rect1.bottom = 130 + 25;<br /> &nbsp;rect1.right = 45;</p><p> &nbsp;mPaint.setColor(Color.BLUE);<br /> &nbsp;// 绘制矩形<br /> &nbsp;canvas.drawRect(rect1, mPaint);</p><p> &nbsp;mPaint.setColor(Color.RED);<br /> &nbsp;// 绘制矩形<br /> &nbsp;canvas.drawRect(50, 130 + 5, 90, 130 + 25, mPaint);</p><p> &nbsp;mPaint.setColor(Color.YELLOW);<br /> &nbsp;// 绘制圆形 这里参数就不说明了 上边已经说了<br /> &nbsp;canvas.drawCircle(40, 130 + 70, 30, mPaint);</p><p> &nbsp;// 定义椭圆对象<br /> &nbsp;RectF rectf1 = new RectF();<br /> &nbsp;// 设置椭圆大小<br /> &nbsp;rectf1.left = 80;<br /> &nbsp;rectf1.top = 130+30;<br /> &nbsp;rectf1.right = 120;<br /> &nbsp;rectf1.bottom = 130 + 70;</p><p> &nbsp;mPaint.setColor(Color.LTGRAY);<br /> &nbsp;// 绘制椭圆<br /> &nbsp;canvas.drawOval(rectf1, mPaint);</p><p> &nbsp;// 绘制多边形<br /> &nbsp;Path path1 = new Path();</p><p> &nbsp;// 设置多边形的点<br /> &nbsp;path1.moveTo(150+5, 130+80-50);<br /> &nbsp;path1.lineTo(150+45, 130+80-50);<br /> &nbsp;path1.lineTo(150+30, 130+120-50);<br /> &nbsp;path1.lineTo(150+20, 130+120-50);<br /> &nbsp;// 使这些点构成封闭的多边形<br /> &nbsp;path1.close();<br /> &nbsp;mPaint.setColor(Color.GRAY);<br /> &nbsp;// 绘制这个多边形<br /> &nbsp;canvas.drawPath(path1, mPaint);</p><p> &nbsp;mPaint.setColor(Color.RED);<br /> &nbsp;mPaint.setStrokeWidth(3);<br /> &nbsp;// 绘制直线<br /> &nbsp;canvas.drawLine(5, 130 + 110, 315, 130 + 110, mPaint);<br /> }<br /> // 通过ShapDrawable来绘制几何图形<br /> mGameView2.DrawShape(canvas);</p><p>}</p><p>@Override<br />public void run() {<br /> while (!Thread.currentThread().isInterrupted()) {<br /> &nbsp;try {<br /> &nbsp;&nbsp;Thread.sleep(100);<br /> &nbsp;} catch (InterruptedException e) {<br /> &nbsp;&nbsp;Thread.currentThread().interrupt();<br /> &nbsp;}<br /> &nbsp;// 使用postInvalidate可以直接在线程中更新界面<br /> &nbsp;postInvalidate();<br /> }</p><p>}</p><p>}</p><p>在android中还可以通过ShapDrawable来绘制图像，ShapDrawable可以设置画笔的形状。通过 getPaint 方法可以得到Paint对象，可以像前面一样设置这个画笔的颜色、尺寸等属性。然而，在ShapDrawable中提供了 setBounds 方法来设置图形显示的区域，最后通过ShapeDrawable 和 Draw方法将图形显示到屏幕上。 请见下边的代码<br /> GameView2<br /></p><p>package xiaohang.zhimeng;</p><p>import android.content.Context;<br />import android.graphics.Canvas;<br />import android.graphics.Color;<br />import android.graphics.LinearGradient;<br />import android.graphics.Paint;<br />import android.graphics.Path;<br />import android.graphics.Rect;<br />import android.graphics.Shader;<br />import android.graphics.drawable.ShapeDrawable;<br />import android.graphics.drawable.shapes.OvalShape;<br />import android.graphics.drawable.shapes.PathShape;<br />import android.graphics.drawable.shapes.RectShape;<br />import android.view.View;</p><p>public class GameView2 extends View {</p><p>// 声明ShapDrawable对象<br />ShapeDrawable mShapeDrawable = null;</p><p>public GameView2(Context context) {<br /> super(context);<br />}</p><p>public void DrawShape(Canvas canvas) {<br /> // 实例化ShapeDrawable对象并说明是绘制一个矩形<br /> mShapeDrawable = new ShapeDrawable(new RectShape());</p><p> // 得到画笔paint对象并设置其颜色<br /> mShapeDrawable.getPaint().setColor(Color.RED);</p><p> Rect bounds = new Rect(5, 250, 55, 280);</p><p> // 设置图像显示的区域<br /> mShapeDrawable.setBounds(bounds);</p><p> // 绘制图像<br /> mShapeDrawable.draw(canvas);<br /> /* =============================== */<br /> /* 实例化ShapeDrawable对象并说明是绘制一个椭圆 */<br /> mShapeDrawable = new ShapeDrawable(new OvalShape());</p><p> // 得到画笔paint对象并设置其颜色<br /> mShapeDrawable.getPaint().setColor(Color.GREEN);</p><p> // 设置图像显示的区域<br /> mShapeDrawable.setBounds(70, 250, 150, 280);</p><p> // 绘制图像<br /> mShapeDrawable.draw(canvas);</p><p> Path path1 = new Path();<br /> // 设置多边形<br /> path1.moveTo(150 + 5, 80 + 80 - 50);<br /> path1.lineTo(150 + 45, 80 + 80 - 50);<br /> path1.lineTo(150 + 30, 80 + 120 - 50);<br /> path1.lineTo(150 + 20, 80 + 120 - 50);<br /> // 使这些点封闭成多边形<br /> path1.close();</p><p> // PathShape后面两个参数分别是高度和宽度<br /> mShapeDrawable = new ShapeDrawable(new PathShape(path1, 150, 150));</p><p> // 得到画笔paint对象并设置其颜色<br /> mShapeDrawable.getPaint().setColor(Color.BLUE);</p><p> // 设置图像显示的区域<br /> mShapeDrawable.setBounds(100, 170, 200, 280);</p><p> // 绘制图像<br /> mShapeDrawable.draw(canvas);<br /> <br /> //绘制正方形<br /> mShapeDrawable = new ShapeDrawable(new RectShape());<br /> //得到画笔并设置颜色<br /> Paint xh_Paint = mShapeDrawable.getPaint();<br /> <br /> &nbsp;&nbsp;/*设置渐变色 这个正方形的颜色是改变的*/<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shader mShader=new LinearGradient(0,0,100,100,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new int[]{Color.RED,Color.GREEN,Color.BLUE,Color.YELLOW,Color.LTGRAY},<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;null,Shader.TileMode.REPEAT);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xh_Paint.setShader(mShader);<br /> <br /> mShapeDrawable.setBounds(250, 250, 280, 280);<br /> mShapeDrawable.draw(canvas);<br />}<br />}</p></body></html>
